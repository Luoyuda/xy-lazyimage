!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("core-js/modules/es6.array.map.js"),require("core-js/modules/es6.array.filter.js")):"function"==typeof define&&define.amd?define(["core-js/modules/es6.array.map.js","core-js/modules/es6.array.filter.js"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).LazyImage=e()}(this,(function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var r=e((function(t){function e(r,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r,n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}));t(r);var n=e((function(t){t.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}},t.exports.__esModule=!0,t.exports.default=t.exports}));t(n);var o=e((function(t){function e(o,i,u){return n()?(t.exports=e=Reflect.construct,t.exports.__esModule=!0,t.exports.default=t.exports):(t.exports=e=function(t,e,n){var o=[null];o.push.apply(o,e);var i=new(Function.bind.apply(t,o));return n&&r(i,n.prototype),i},t.exports.__esModule=!0,t.exports.default=t.exports),e.apply(null,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})),i=t(o),u=t(e((function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}))),s=t(e((function(t){function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports}))),a=e((function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports}));t(a);var l=e((function(t){t.exports=function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],u=!0,s=!1;try{for(r=r.call(t);!(u=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{u||null==r.return||r.return()}finally{if(s)throw o}}return i}},t.exports.__esModule=!0,t.exports.default=t.exports}));t(l);var c=e((function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n},t.exports.__esModule=!0,t.exports.default=t.exports}));t(c);var f=e((function(t){t.exports=function(t,e){if(t){if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}));t(f);var p=e((function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}));t(p);var d=t(e((function(t){t.exports=function(t,e){return a(t)||l(t,e)||f(t,e)||p()},t.exports.__esModule=!0,t.exports.default=t.exports}))),h=e((function(t){t.exports=function(t){if(Array.isArray(t))return c(t)},t.exports.__esModule=!0,t.exports.default=t.exports}));t(h);var y=e((function(t){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports}));t(y);var x=e((function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}));t(x);var v=t(e((function(t){t.exports=function(t){return h(t)||y(t)||f(t)||x()},t.exports.__esModule=!0,t.exports.default=t.exports}))),g=null;var m={getVwVh:function(t){return{vw:t.innerWidth||window.innerWidth||document.documentElement.clientWidth,vh:t.innerHeight||window.innerHeight||document.documentElement.clientHeight}},querySelector:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t?document.querySelector(t):document.body},getAttribute:function(t,e){return t.getAttribute(e)},querySelectorAll:function(t,e){return t&&e?t.querySelectorAll(e):[]}};[["src","getSrc",m.getAttribute],["data-src","getDataSrc",m.getAttribute],["data-background-image","getBackgroundSrc",m.getAttribute],["style","getStyle",m.getAttribute],["[data-src]","queryAllSrc",m.querySelectorAll],["[data-background-image]","queryAllImage",m.querySelectorAll]].forEach((function(t){var e=d(t,3),r=e[0],n=e[1],o=e[2];m[n]=function(t){return o(t,r)}}));var b=function(){function t(e){u(this,t);var r=(e=e||{}).el||"";this.el=m.querySelector(r),this.wait=e.wait||500,this.diffTop=0,this.diffLeft=0,this.isScrollContainer=e.isScrollContainer||!(this.el.scrollWidth<=this.el.clientWidth)||!(this.el.scrollHeight<=this.el.clientHeight),this.container=this.isScrollContainer?this.el:window,this.observerOption=e.observerOption||{thresholds:[1],root:this.isScrollContainer?this.el:null},this.images=[],this.initEvents=(g||(g=window.IntersectionObserver?function(){var t,e=this,r=[],n=new IntersectionObserver((function(o){var i;(i=r).push.apply(i,v(o)),t&&clearTimeout(t),t=setTimeout((function(){r.filter((function(t){return t.isIntersecting})).map((function(t){return t.target})).forEach((function(t){e.initImages(t)&&n.unobserve(t)})),r=[]}),e.wait)}),this.observerOption);return this.images.forEach((function(t){return n.observe(t)})),function(){e.images.forEach((function(t){return n.unobserve(t)}))}}:function(){var t=this,e=null,r=function(){e&&clearTimeout(e),e=setTimeout((function(){t.images.forEach((function(e){return t.initImages(e)}))}),t.wait)};return this.container!==window&&window.addEventListener("scroll",r),this.container.addEventListener("scroll",r),function(){t.container.removeEventListener("scroll",r),window.removeEventListener("scroll",r)}})).bind(this),this.destroyEvent=function(){},this.update()}return s(t,[{key:"_init",value:function(){this.destroyEvent(),this.queryImage(),this.destroyEvent=this.initEvents()}},{key:"update",value:function(){return this._init()}},{key:"queryImage",value:function(){this.el&&(this.images=[].concat(v(m.queryAllSrc(this.el)),v(m.queryAllImage(this.el))).filter((function(t){return!(m.getSrc(t)||!m.getDataSrc(t)&&!m.getBackgroundSrc(t))})))}},{key:"inViewport",value:function(t){var e=m.getVwVh(this.container),r=e.vw,n=e.vh,o=t.getBoundingClientRect(),i=o.top,u=o.right,s=o.bottom,a=o.left;return i-n<this.diffTop&&s>this.diffTop&&a-r<this.diffLeft&&u>this.diffLeft}},{key:"initImages",value:function(t){var e=this;if(!this.inViewport(t))return null;var r=m.getSrc(t),n=m.getDataSrc(t),o=m.getBackgroundSrc(t);if(r||!n&&!o)return t;if(n){t.setAttribute("src",n);t.addEventListener("load",(function r(){e.images=e.images.filter((function(e){return e!==t})),t.removeAttribute("data-src"),t.removeEventListener("load",r)}))}return o&&(t.style="".concat(m.getStyle(t),"; background-image:url(").concat(o,");"),this.images=this.images.filter((function(e){return e!==t})),t.removeAttribute("data-background-image")),t}}]),t}();return function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return i(b,e)}}));
