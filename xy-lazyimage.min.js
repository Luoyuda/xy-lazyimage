!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("core-js/modules/es6.array.map.js"),require("core-js/modules/es6.array.filter.js")):"function"==typeof define&&define.amd?define(["core-js/modules/es6.array.map.js","core-js/modules/es6.array.filter.js"],e):(t="undefined"!=typeof globalThis?globalThis:t||self).LazyImage=e()}(this,(function(){"use strict";function t(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function e(t,e){return t(e={exports:{}},e.exports),e.exports}var r=t(e((function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.__esModule=!0,t.exports.default=t.exports}))),n=t(e((function(t){function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t},t.exports.__esModule=!0,t.exports.default=t.exports}))),o=e((function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.__esModule=!0,t.exports.default=t.exports}));t(o);var i=e((function(t){t.exports=function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],s=!0,u=!1;try{for(r=r.call(t);!(s=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);s=!0);}catch(t){u=!0,o=t}finally{try{s||null==r.return||r.return()}finally{if(u)throw o}}return i}},t.exports.__esModule=!0,t.exports.default=t.exports}));t(i);var s=e((function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n},t.exports.__esModule=!0,t.exports.default=t.exports}));t(s);var u=e((function(t){t.exports=function(t,e){if(t){if("string"==typeof t)return s(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(t,e):void 0}},t.exports.__esModule=!0,t.exports.default=t.exports}));t(u);var a=e((function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}));t(a);var l=t(e((function(t){t.exports=function(t,e){return o(t)||i(t,e)||u(t,e)||a()},t.exports.__esModule=!0,t.exports.default=t.exports}))),c=e((function(t){t.exports=function(t){if(Array.isArray(t))return s(t)},t.exports.__esModule=!0,t.exports.default=t.exports}));t(c);var f=e((function(t){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.__esModule=!0,t.exports.default=t.exports}));t(f);var d=e((function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.__esModule=!0,t.exports.default=t.exports}));t(d);var p=t(e((function(t){t.exports=function(t){return c(t)||f(t)||u(t)||d()},t.exports.__esModule=!0,t.exports.default=t.exports}))),h=null;var v={getAttribute:function(t,e){return t.getAttribute(e)},getVwVh:function(t){return{vw:t.innerWidth||window.innerWidth||document.documentElement.clientWidth,vh:t.innerHeight||window.innerHeight||document.documentElement.clientHeight}},querySelector:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t?document.querySelector(t):document.body},querySelectorAll:function(t,e){return t&&e?t.querySelectorAll(e):[]}};return[["src","getSrc"],["data-src","getDataSrc"],["data-background-image","getBackgroundSrc"]].forEach((function(t){var e=l(t,2),r=e[0],n=e[1];v[n]=function(t){return v.getAttribute(t,r)}})),function(){function t(e){r(this,t);var n=e.el||"";this.wait=e.wait||500,this.el=v.querySelector(n),this.diffTop=0,this.diffLeft=0,this.container=this.isScrollContainer?this.el:window,this.observerOption=e.observerOption||{thresholds:[1],root:this.isScrollContainer?this.el:null},this.isScrollContainer=e.isScrollContainer||!(this.el.scrollWidth<=this.el.clientWidth)||!(this.el.scrollHeight<=this.el.clientHeight),this.images=[],this.initEvents=(h||(h=window.IntersectionObserver?function(){var t,e=this,r=[],n=new IntersectionObserver((function(o){var i;(i=r).push.apply(i,p(o)),t&&clearTimeout(t),t=setTimeout((function(){r.filter((function(t){return t.isIntersecting})).map((function(t){return t.target})).forEach((function(t){e.initImages(t)&&n.unobserve(t)})),r=[]}),e.wait)}),this.observerOption);return this.images.forEach((function(t){return n.observe(t)})),function(){e.images.forEach((function(t){return n.unobserve(t)}))}}:function(){var t=this,e=null,r=function(){e&&clearTimeout(e),e=setTimeout((function(){t.images.forEach((function(e){return t.initImages(e)}))}),t.wait)};return this.container!==window&&window.addEventListener("scroll",r),this.container.addEventListener("scroll",r),function(){t.container.removeEventListener("scroll",r),window.removeEventListener("scroll",r)}})).bind(this),this.destroyEvent=function(){},this.update()}return n(t,[{key:"_init",value:function(){this.destroyEvent(),this.queryImage(),this.destroyEvent=this.initEvents()}},{key:"update",value:function(){return this._init()}},{key:"queryImage",value:function(){this.el&&(this.images=[].concat(p(v.querySelectorAll(this.el,"[data-src]")),p(v.querySelectorAll(this.el,"[data-background-image]"))).filter((function(t){return!(v.getSrc(t)||!v.getDataSrc(t)&&!v.getBackgroundSrc(t))})))}},{key:"inViewport",value:function(t){var e=v.getVwVh(this.container),r=e.vw,n=e.vh,o=t.getBoundingClientRect(),i=o.top,s=o.right,u=o.bottom,a=o.left;return i-n<this.diffTop&&u>this.diffTop&&a-r<this.diffLeft&&s>this.diffLeft}},{key:"initImages",value:function(t){var e=this;if(!this.inViewport(t))return null;var r=v.getSrc(t),n=v.getDataSrc(t),o=v.getBackgroundSrc(t);if(r||!n&&!o)return t;if(n&&(t.setAttribute("src",n),t.addEventListener("load",(function(){e.images=e.images.filter((function(e){return e!==t})),t.removeAttribute("data-src")}))),o){var i=t.getAttribute("style");t.style="background-image:url(".concat(o,");").concat(i),t.removeAttribute("data-background-image")}return t}}]),t}()}));
